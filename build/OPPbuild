#!/bin/bash

#set -x

SCRIPT_NAME=`basename $0`
ARM_VAR=ARM
SIM_VAR=simulator
SIM_TGT=x86

CMAKE_ARM='cmake -DCMAKE_TOOLCHAIN_FILE=./TC-AEF.cmake -DCMAKE_TARGET_PROCESSOR=ARM ..'
CMAKE_SIM='cmake -DCMAKE_TOOLCHAIN_FILE=./TC-AEF.cmake -DCMAKE_TARGET_PROCESSOR=x86 ..'

if [ $# -ne 1 ]
then
	echo "usage: $SCRIPT_NAME $ARM_VAR|$SIM_VAR"
	exit
fi

if [ $1 = $ARM_VAR ]
then
	echo $CMAKE_ARM
	$CMAKE_ARM
	make clean
	make

elif [ $1 = $SIM_VAR ]
then
	echo $CMAKE_SIM
	$CMAKE_SIM
	make clean
	make
 
else
	echo "$1 not a valid target"
	echo "usage: $SCRIPT_NAME $ARM_VAR|$SIM_VAR"
fi
